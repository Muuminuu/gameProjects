<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Clicker Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    .container {
        display: none;
    }
    .active {
        display: block;
    }
    .button {
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
    }
    #score {
        font-size: 24px;
        margin-bottom: 20px;
    }
    #clickButton {
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
    }
    .upgradeButton {
        margin-top: 10px;
        padding: 5px 10px;
        font-size: 14px;
        cursor: pointer;
    }
    #xpBarContainer {
        position: absolute;
        top: 0;
        right: 0;
        padding: 10px;
    }
    #xpBar {
        width: 100px;
        height: 20px;
        border: 1px solid #000;
        overflow: hidden;
        position: relative;
    }
    #xpFill {
        height: 100%;
        background-color: #00ff00;
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
    }
    #currentLevel {
        position: absolute;
        top: 30px;
        right: 10px;
    }
    #perkTree {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        margin-top: 20px;
    }
    .branch {
        margin-right: 50px;
    }
    .perk {
        margin-bottom: 10px;
        cursor: pointer;
    }
    .perk:hover {
        background-color: #f0f0f0;
    }
    .perk.unlocked {
        background-color: #b3ffb3;
    }
    .perk.selected {
        border: 2px solid #00f;
    }
    #perkPoints {
        position: absolute;
        top: 10px;
        right: 10px;
        font-weight: bold;
    }
</style>
</head>
<body>

<button class="button" onclick="openPage('spaceElements')">Space Elements</button>
<button class="button" onclick="openPage('lifeEvolution')">Life Evolution</button>

<div id="spaceElements" class="container">
    <h1>Space Elements</h1>
    <div id="xpBarContainer">
        <div id="xpBar"><div id="xpFill"></div></div>
        <div id="currentLevel">Level: 1</div>
    </div>
    <div id="score">Space Dust: 0</div>
    <button id="clickButton">Click me!</button>
    <div id="clickPowerUpgradeDiv">
        <h2>Space Click Power</h2>
        <p>Current Click Power: <span id="clickPowerDisplay">1</span></p>
        <button class="upgradeButton" id="clickPowerUpgrade">Upgrade Click Power (Cost: 10 Space Dust)</button>
    </div>
    <div id="autoGenerateUpgradeDiv">
        <h2>Space Auto Generation</h2>
        <p>Current Auto Generation: <span id="autoGenerateDisplay">1</span> per second</p>
        <button class="upgradeButton" id="autoGenerateUpgrade">Upgrade Auto Generation (Cost: 20 Space Dust)</button>
    </div>
</div>

<div id="lifeEvolution" class="container">
    <h1>Life Evolution</h1>
    <div id="perkPoints">Perk Points: 0</div>
    <div id="perkTree">
        <div class="branch">
            <h2>Branch 1: Microcellular Life</h2>
            <div class="perk" data-perk="1">Single-celled organisms (Unlock: +1 auto generation)</div>
            <div class="perk" data-perk="2">Simple multicellular organisms (Unlock: +2 auto generation)</div>
        </div>
        <div class="branch">
            <h2>Branch 2: Complex Life</h2>
            <div class="perk" data-perk="3">Plants (Unlock: +5 auto generation)</div>
            <div class="perk" data-perk="4">Animals (Unlock: +10 auto generation)</div>
            <div class="perk" data-perk="5">Extraterrestrials (Unlock: +20 auto generation)</div>
        </div>
    </div>
</div>

<script>
    // Initial variables
    let totalSpaceDust = 0;
    let spaceDust = 0;
    let clickPower = 1;
    let autoPower = 1; // Set auto generation rate to 1 per second
    let clickPowerUpgradeCost = 10;
    let autoGenerateUpgradeCost = 20;
    let xp = 0;
    let level = 1;
    let perkPoints = 0;

    // Function to update score
    function updateSpaceDust() {
        document.getElementById("score").innerText = "Space Dust: " + Math.round(spaceDust);
    }

    // Function to update XP bar
    function updateXPBar() {
        let maxXp = 5000 * Math.pow(3, level - 1); // Max XP for the current level
       
        let xpPercentage = (xp / maxXp) * 100;
        if (xpPercentage > 100) xpPercentage = 100; // Cap at 100%
        document.getElementById("xpFill").style.width = xpPercentage + "%";
    }

    // Function to update current level
    function updateCurrentLevel() {
        document.getElementById("currentLevel").innerText = "Level: " + level;
    }

    // Function to handle click events
    function handleClick() {
        spaceDust += clickPower;
        totalSpaceDust += clickPower;
        updateSpaceDust();
        xp += 1; // Increase XP by 1 for every spacedust collected
        updateXPBar();
        checkLevelUp();
    }

    // Function to handle auto-generating score
    function autoGenerate() {
        spaceDust += autoPower;
        totalSpaceDust += autoPower;
        updateSpaceDust();
        checkLevelUp();
    }

    // Function to handle click power upgrade
    function upgradeClickPower() {
        if (spaceDust >= clickPowerUpgradeCost) {
            spaceDust -= clickPowerUpgradeCost;
            clickPower++;
            clickPowerUpgradeCost = Math.round(clickPowerUpgradeCost * 1.1); // Increase cost for next upgrade
            document.getElementById("clickPowerUpgrade").innerText = "Upgrade Click Power (Cost: " + clickPowerUpgradeCost + " Space Dust)";
            document.getElementById("clickPowerDisplay").innerText = clickPower;
            updateSpaceDust();
        }
    }

    // Function to handle auto-generate upgrade
    function upgradeAutoGenerate() {
        if (spaceDust >= autoGenerateUpgradeCost) {
            spaceDust -= autoGenerateUpgradeCost;
            autoPower++;
            autoGenerateUpgradeCost = Math.round(autoGenerateUpgradeCost * 1.1); // Increase cost for next upgrade
            document.getElementById("autoGenerateUpgrade").innerText = "Upgrade Auto Generation (Cost: " + autoGenerateUpgradeCost + " Space Dust)";
            document.getElementById("autoGenerateDisplay").innerText = autoPower + " per second";
            updateSpaceDust();
        }
    }

    // Function to check for level up
    function checkLevelUp() {
        let maxXp = 5000 * Math.pow(3, level - 1); // Max XP for the current level
        if (xp >= maxXp) {
            level++;
            xp = 0;
            perkPoints++;
            alert("Congratulations! You've reached level " + level + ". You gained 1 perk point.");
            // You can add more logic here to handle perk allocation in a perk tree
            updateCurrentLevel();
        }
        updateXPBar();
    }

    // Function to handle perk selection
    function selectPerk(perk) {
        let perkElement = document.querySelector(`[data-perk="${perk}"]`);
        if (!perkElement.classList.contains("unlocked")) {
            if (perkPoints > 0) {
                perkElement.classList.add("unlocked");
                perkPoints--;
                document.getElementById("perkPoints").innerText = "Perk Points: " + perkPoints;
                // Add functionality here to apply the unlocked perk's effect
                // For now, let's just display a message
                alert("Perk unlocked! Apply its effect here.");
            } else {
                alert("Not enough perk points to unlock this perk.");
            }
        } else {
            alert("Perk already unlocked.");
        }
    }

    // Function to open specific page
    function openPage(pageName) {
        let containers = document.getElementsByClassName("container");
        for (let container of containers) {
            container.style.display = "none";
        }
        document.getElementById(pageName).style.display = "block";
    }

    // Set up click event listeners
    document.getElementById("clickButton").addEventListener("click", handleClick);
    document.getElementById("clickPowerUpgrade").addEventListener("click", upgradeClickPower);
    document.getElementById("autoGenerateUpgrade").addEventListener("click", upgradeAutoGenerate);

    // Set up auto-generation
    setInterval(autoGenerate, 1000); // Generates every second

    // Initially open the first page
    openPage("spaceElements");

    // Add event listener to perks
    document.querySelectorAll('.perk').forEach(item => {
        item.addEventListener('click', event => {
            selectPerk(item.getAttribute('data-perk'));
        });
    });
</script>

</body>
</html>
